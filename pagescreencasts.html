<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Screencasts for the python track in Applied Economic Analysis</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Jan Boone" />
<link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Screencasts for the python track in Applied Economic Analysis</h1>
<p>
<b>Under construction</b>
</p>


<div id="outline-container-org497358f" class="outline-2">
<h2 id="org497358f">How are the screencasts supposed to help?</h2>
<div class="outline-text-2" id="text-org497358f">
<p>
For the python part of the course we use <a href="https://github.com/janboone/applied-economics">this notebook</a>. The notebook is fairly self-explanatory, but you may get stuck with some of the questions. The screencasts are meant to help you along if you do not know how to proceed.
</p>

<p>
For students without a programming background (like most economics students) it can be intimidating or frustrating to start typing code. Reasons include not knowing how to do it perfectly or getting scared when there is an error message. Obviously, this is not necessary nor helpful when trying to learn a programming language. But the upshot is that some students do not try anything, sit back and type the correct answers when given to them. Needless to say, you do not learn how to program in python by typing in the correct answers given in class.
</p>

<p>
The way we solve this in class is to give plenty of time to solve the questions yourself. In economics terminology: by keeping you in class, we reduce your opportunity costs to zero. Hence, you might as well type in some code and press Shift-Enter.
</p>

<p>
We cannot do this with a screencast. Chances are, you understand how fast-forward works. Hence, the screencasts give you hints on how to finish the notebook but it does not give you step-by-step answers for each question.
</p>
</div>

<div id="outline-container-org7f1ff35" class="outline-3">
<h3 id="org7f1ff35">Why are there screencasts?</h3>
<div class="outline-text-3" id="text-org7f1ff35">
<p>
The screencasts were initially developed because of the 2020 corona crisis where students were no longer able to come to Tilburg University. But they can also be used as complements to the lecturers and classes taught.
</p>
</div>
</div>

<div id="outline-container-org1cd22d2" class="outline-3">
<h3 id="org1cd22d2">Suggested use of the screencasts</h3>
<div class="outline-text-3" id="text-org1cd22d2">
<p>
Just watching the screencasts is not going to be very useful for you. The best way to use them is as follows:
</p>

<ul class="org-ul">
<li>first read the relevant section in the notebook and try to solve the questions by yourself</li>
<li>if you manage to do so, you are done and there is no need to watch the screencast; if you do not manage to answer all the questions, you have the background for the screencast (which is rather short and does not motivate the underlying economic problem) and you know what problems to look for in the video</li>
<li>type along with what we do in the screencast. Pause the video if you need more time to type</li>
<li>experiment with the code that we give you in the video either during the video or after watching it; try different numerical values, use different syntax or a different library; if you get an error, google it to see what is going on etc.</li>
<li>in general, play around with the python code; that is the best way to understand and learn the language</li>
</ul>

<p>
With screencasts there is &#x2013;obviously&#x2013; no interaction between teachers and students. This is a problem when you run into an error message. In class students then immediately raise their hand to understand what is happening.
</p>

<p>
As this is not possible with a screencast, here are some tips on how to deal with error messages. Also note that as the screencast is typed "live", so there will be error messages in the videos as well and you can see how we deal with these as we go along.
</p>

<p>
Python error messages:
</p>
<ul class="org-ul">
<li>start reading the error message at the end; hence scroll down in your notebook to see the last line. This will usually give a clue of what is happening</li>
<li>if you do not know what the last line means, use copy/paste to google it or go to <a href="https://stackoverflow.com/">stackoverflow</a> directly</li>
<li>reading "upwards" from the last line, you can trace how the error was generated</li>
</ul>
</div>
</div>

<div id="outline-container-org8d7425b" class="outline-3">
<h3 id="org8d7425b">Prerequisite knowledge</h3>
<div class="outline-text-3" id="text-org8d7425b">
<p>
<b>Economics</b>: this introduction to python is part of an MSc degree in Economics. Hence, we assume that you know what utility is and how utility (and producer surplus, if relevant)
adds up to welfare. You know how demand and supply curves are derived. What market power is, how a Cournot model is solved. Concepts like asymmetric information, adverse selection and moral hazard ring a bell. You know what risk is and how it can be measured. You know what the <a href="https://www.worldbank.org/">World Bank</a> is, as later on we will use their data. You have done introductions to statistics and econometrics. Generally speaking, you understand the economics parts of the notebooks, though not necessarily their python implementation.
</p>

<p>
<b>Python</b>: before you start with the notebook and the screencasts you need some basic knowledge of python. You can use <a href="https://www.datacamp.com/">Datacamp</a>, <a href="https://www.youtube.com/playlist?list=PLi01XoE8jYohWFPpC17Z-wWhPOSuh8Er-">Socratica</a>, or introduction videos to python, numpy etc. from one of the big python conferences, like <a href="https://www.youtube.com/playlist?list=PLYx7XA2nY5GcDQblpQ_M1V3PQPoLWiDAC">SciPy 2019</a> or <a href="https://www.youtube.com/playlist?list=PLPbTDk1hBo3xof51R8pk3kP1BVBuMYP9c">PyCon 2019</a>.
</p>

<p>
Things you should be familiar with is the syntax of python (e.g. the role of spaces), how to import libraries (difference between <code>import numpy as np, import numpy, from numpy import *</code>), how to define a function, use of datatypes like lists, tuples, dictionaries, <code>numpy</code> arrays (what is the difference between adding lists (using "+") and adding numpy arrays), you understand slicing notation for arrays and lists, the use of masks to select data from an array, you are able to plot a function or data points with <code>matplotlib</code>, you can read data into a dataframe with <code>pandas</code> and then manipulate this data (define new columns/variables).
</p>
</div>
</div>

<div id="outline-container-orgb6eb796" class="outline-3">
<h3 id="orgb6eb796">Libraries we use</h3>
<div class="outline-text-3" id="text-orgb6eb796">
<ul class="org-ul">
<li>numpy: basic number crunching and vector manipulation</li>
<li>pymc3: to generate random numbers and do Bayesian analysis</li>
<li>tensorflow (2.0 or later): to generate random numbers; here used mainly to "have seen it"; we use it more in a later course on data science</li>
<li>scipy: scientific python</li>
<li>matplotlib: to make plots</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org3bcecee" class="outline-2">
<h2 id="org3bcecee"><span class="todo TODO">TODO</span> Compare jupyter notebook/lab and emacs</h2>
<div class="outline-text-2" id="text-org3bcecee">
</div>
<div id="outline-container-org8f82f7e" class="outline-3">
<h3 id="org8f82f7e">Why am I using emacs</h3>
<div class="outline-text-3" id="text-org8f82f7e">
<p>
As explained <a href="#org497358f">above</a>, one of the worries is that students sit back and copy/paste whatever is done in the videos. To force them to make more of an effort, I do not use jupyter notebooks in the screencasts. Hence, a bit more "mental processing" is needed to follow along. This is also the reason that we do not publish the notebooks from the videos. Students need to type along with the video; not copy/paste from the final file.
</p>

<p>
Further, Emacs makes it easier to give a presentation in the screencast than jupyter notebooks, e.g. by folding sections that are finished and by giving completion on latex snippets.
</p>
</div>
</div>

<div id="outline-container-orgde2db62" class="outline-3">
<h3 id="orgde2db62">Jupyter vs Emacs</h3>
<div class="outline-text-3" id="text-orgde2db62">
<ul class="org-ul">
<li>evaluating a code cell with python in jupyter is done by pressing Shift-Enter (that is, press the Shift and Enter keys at the same time); in Emacs press C-c C-c (that is press Control and C simultaneously two times)</li>
<li>to get help on a function, type e.g. <code>np.arange?</code> in a code cell and evaluate the cell</li>
<li>to type text in a jupyter notebook, turn a code-cell into a Markdown cell; in Emacs you can simply type text</li>
<li>to create a new code cell in jupyter: press a (new cell above) or b (new cell below) when you do not have a cursor in the current cell (if you do have a cursor, first press the Esc key); in Emacs (and org-mode version &gt;= 9.2) type C-c C-, and a menu will appear of block types (python, ipython, elisp etc.)</li>
<li>use the Tab key to complete function, variable etc. names. Works both in jupyter and Emacs.</li>
<li>add <code>%matplotlib inline</code> after importing <code>matplotlib.pyplot</code> to get the figures in the notebook/file itself</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org41eab9a" class="outline-2">
<h2 id="org41eab9a">The market</h2>
<div class="outline-text-2" id="text-org41eab9a">
</div>
<div id="outline-container-org7ebd93e" class="outline-3">
<h3 id="org7ebd93e">why do we love the market?</h3>
<div class="outline-text-3" id="text-org7ebd93e">
<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/naYoM7cezSE" frameborder="0" allowfullscreen>Allocating goods to consumers</iframe>
</p>

<p>
Topics we cover in this video:
</p>
<ul class="org-ul">
<li>optimal way to allocate a fixed number of products among a set of consumers</li>
<li>use of <code>np.arange</code> to generate a vector of numbers</li>
<li><code>np.random.normal</code> and <code>tf.random.normal</code> to generate a vector of random numbers</li>
<li>sort a vector of numbers</li>
<li>use slicing to select a subset of entries in a vector \(x\), e.g. <code>x[:5]</code></li>
<li>use <code>format</code> to format the output in a print statement</li>
<li>sum entries in a vector</li>
</ul>

<p>
Questions you should be able to answer before continuing:
</p>
<ul class="org-ul">
<li>what is the welfare maximizing way to allocate \(m\) products among \(n>m\) consumers?</li>
<li>how can you calculate the Lagrange multiplier in the optimization problem at the end of the video using python?</li>
<li>why do we get an error if we would use <code>tf.random.normal(50,10,2)</code>? hint: use <code>tf.random.normal?</code></li>
</ul>
</div>

<div id="outline-container-org60b0227" class="outline-4">
<h4 id="org60b0227">market outcome</h4>
<div class="outline-text-4" id="text-org60b0227">
<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/8ywVw9lIMmM" frameborder="0" allowfullscreen>Equilibrium price and welfare</iframe>
</p>

<p>
Topics we cover:
</p>
<ul class="org-ul">
<li>define a (demand) function</li>
<li>booleans False/True represented as 0/1 and can be summed</li>
<li>use of <code>scipy</code>'s <code>optimize.fsolve</code> to find the zero of a function (if you want more information about this function, use <code>sp.optimize.fsolve?</code>)</li>
<li>use of <code>lambda</code> to create an anonymous function (i.e. function without a name)</li>
<li>plot the demand function with <code>plt.plot</code>; use <code>plt.vlines</code> to plot a vertical line</li>
<li>instead of slicing, we used a boolean mask to select valuations which exceed the equilibrium <code>price</code>: <code>valuations[valuations&gt;price]</code></li>
</ul>
</div>
</div>

<div id="outline-container-org7ebb547" class="outline-4">
<h4 id="org7ebb547">elastic demand and supply</h4>
<div class="outline-text-4" id="text-org7ebb547">
<p>
You should be able to do this section in the notebook yourself. If not, then check the videos above once more.
</p>
</div>
</div>
</div>

<div id="outline-container-orga37a3dc" class="outline-3">
<h3 id="orga37a3dc">why do others not love the market?</h3>
<div class="outline-text-3" id="text-orga37a3dc">
</div>
<div id="outline-container-org2188195" class="outline-4">
<h4 id="org2188195">income distribution</h4>
<div class="outline-text-4" id="text-org2188195">
<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/tyqtrIAx898" frameborder="0" allowfullscreen>Income distribution</iframe>
</p>

<p>
Topics we cover in this video:
</p>
<ul class="org-ul">
<li>multiply boolean masks (<code>afford</code> and <code>wtp</code> in the video) to generate the AND condition: demand consists of people who are willing to pay price \(p\) for the good AND who can afford to pay \(p\).</li>
</ul>

<p>
Questions you should be able to answer:
</p>
<ul class="org-ul">
<li>show &#x2013;using python&#x2013; that welfare in the market (<code>welfare_2</code>) is below the max. possible welfare</li>
<li>the assignment in the notebook: run the model with the income distribution two times and show that higher income inequality can lead to lower welfare in the market. That is, there is an efficiency argument for income redistribution in a market context.</li>
</ul>
</div>
</div>

<div id="outline-container-orga4fcb7c" class="outline-4">
<h4 id="orga4fcb7c">market power</h4>
<div class="outline-text-4" id="text-orga4fcb7c">
<p>
You should be able to do the market power section on your own. It shows a graph suggesting the monopoly price is lower than the perfect competition price. In this context this is simply wrong. The question is: what is wrong in the python code?
</p>

<p>
Hence, test parts of the code to understand where things are going wrong. To solve this problem, you may want to look at the function <code>min</code>. That is, evaluate <code>min?</code> and e.g. <code>min(3,8)</code>.
</p>
</div>

<div id="outline-container-org8355e16" class="outline-5">
<h5 id="org8355e16">merger simulation</h5>
<div class="outline-text-5" id="text-org8355e16">
<p>
We split the merger simulation section into different subsections/videos.
</p>
</div>

<ul class="org-ul">
<li><a id="orga932ffc"></a>Cournot<br />
<div class="outline-text-6" id="text-orga932ffc">
<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/LiOqDkj9wWw" frameborder="0" allowfullscreen>Cournot</iframe>
</p>

<p>
Topics we cover in the video:
</p>
<ul class="org-ul">
<li>define the reaction function in Python for a simple Cournot model</li>
<li>use <code>sp.optimize.fminbound</code> on "minus profits" because Python has no maximization routines</li>
<li>use <code>fsolve</code> on the function <code>fixed_point</code> to find the equilibrium outcome (both firms have output equal to the optimal reaction to the other firm's output level)</li>
<li>this corresponds to the point where the reaction functions intersect in \((q_1,q_2)\) space</li>
</ul>

<p>
Questions you should be able to answer:
</p>
<ul class="org-ul">
<li>which of the two lines drawn in the video is the reaction function of firm 1?</li>
<li>show that the equilibrium outcome for the case where \(c_1=0.1,c_2=0.2\) has \((q_1,q_2)= (0.33333333, 0.23333333)\)</li>
</ul>
</div>
</li>

<li><a id="org861aa4e"></a>Pandas<br />
<div class="outline-text-6" id="text-org861aa4e">
<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/8nHpZ-1MidE" frameborder="0" allowfullscreen>Pandas</iframe>
</p>

<p>
Topics we cover in the video:
</p>
<ul class="org-ul">
<li>create a 2 dimensional vector with draws from a normal distribution; note that in the notebook you only need a 1 dimensional draw (for the merged firm's cost level)
<ul class="org-ul">
<li>the rows are states of the world, the first column is firm 1's cost level, the second column firm 2's costs</li>
</ul></li>
<li>create a Pandas dataframe with <code>pd.DataFrame</code> and a dictionary of the form: <code>{'column name': vector with values}</code></li>
<li>define new columns in the dataframe</li>
<li>two ways you can refer to a column in a dataframe: e.g. <code>df.Q</code> and <code>df['Q']</code>; note that you cannot use the former if there are spaces in the column name</li>
</ul>

<p>
Questions you should be able to answer:
</p>
<ul class="org-ul">
<li>instead of defining <code>q1,q2</code> separately, define the vector <code>q</code> as follows and use this vector to create the dataframe <code>df</code> (hint: use <code>q.shape</code>)</li>
</ul>
<pre class="example">
costs = tf.random.normal([50,2],0.2,0.05).numpy()
q = np.array([sp.optimize.fsolve(lambda x: fixed_point(x,costs[i]),[0,0]) for i in range(50)])
</pre>
</div>
</li>

<li><a id="org3f27c16"></a>OPTIONAL: Cournot with variable \(n\)<br />
<div class="outline-text-6" id="text-org3f27c16">
<p>
This section is optional. If this is your first Python course, skip this section for now (and come back to it later).
</p>

<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/xyaXz2L1F_Q" frameborder="0" allowfullscreen>Optional Cournot video</iframe>
</p>

<p>
In our previous Cournot model (and in the notebook), we defined the function <code>reaction</code> in such a way that it is specific to the number of firms in the market. This video introduces a function reaction that is more general. It makes the code more readable but also a bit more complicated.
</p>

<p>
If you want to take this a step further, look at <a href="https://numpy.org/doc/stable/reference/generated/numpy.vectorize.html?highlight=vectorize#numpy.vectorize">numpy's vectorize.</a>
</p>

<p>
Topic we cover:
</p>
<ul class="org-ul">
<li><code>np.zeros_like(c)</code> for an array <code>c</code></li>
</ul>

<p>
Questions you should be able to answer:
</p>
<ul class="org-ul">
<li>predict/explain what is printed if you evaluate the following code block:</li>
</ul>
<pre class="example">
i = 3
mask = np.arange(6) != i
print(mask)
print(np.arange(6)[mask])
print(np.sum(np.arange(6)[mask]))
</pre>
</div>
</li>
</ul>
</div>
</div>


<div id="outline-container-orgcc91015" class="outline-4">
<h4 id="orgcc91015">external effects</h4>
<div class="outline-text-4" id="text-orgcc91015">
<p>
This section you should be able to do on your own. If not, watch again the video's above.
</p>

<p>
It provides another reason why markets may not generate max. welfare in the real world.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org505fe19" class="outline-2">
<h2 id="org505fe19">Asymmetric information</h2>
<div class="outline-text-2" id="text-org505fe19">
<p>
Here we consider two standard forms of asymmetric information: adverse selection and moral hazard.
</p>
</div>

<div id="outline-container-org3874d54" class="outline-3">
<h3 id="org3874d54">adverse selection</h3>
<div class="outline-text-3" id="text-org3874d54">
<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/GeVGCJmq9PE" frameborder="0" allowfullscreen></iframe>
</p>

<p>
Topics we cover in the video:
</p>
<ul class="org-ul">
<li>drawing samples from a uniform distribution</li>
<li>in jupyter notebook/lab you can introduce a greek letter, say \(\rho\), by typing <code>\rho</code> and then the TAB key</li>
<li>selecting the last, say 3 elements from a vector \(x\) by slicing: <code>x[-3:]</code></li>
<li>downward sloping supply curve in a perfectly competitive insurance market</li>
</ul>

<p>
Questions you should be able to answer:
</p>
<ul class="org-ul">
<li>the assignment in the adverse selection section in the notebook: the effect of income on insurance demand</li>
</ul>
</div>
</div>

<div id="outline-container-orga900b16" class="outline-3">
<h3 id="orga900b16">moral hazard</h3>
<div class="outline-text-3" id="text-orga900b16">
<p>
<iframe width="660" height="503" src="https://www.youtube.com/embed/saST6igsR6Y" frameborder="0" allowfullscreen></iframe>
</p>

<p>
Topics we cover in the video:
</p>
<ul class="org-ul">
<li>we use <code>pymc3</code> for random draws from a log-normal distribution</li>
<li>the government maximizes welfare over marginal tax rates \(\tau\) while each agent in the economy maximizes work effort for a given \(\tau\)
<ul class="org-ul">
<li>we have an optimization problem "over" optimization problems</li>
</ul></li>
</ul>

<p>
Questions you should be able to answer:
</p>
<ul class="org-ul">
<li>what will be the optimal tax rate with \(\rho=1\) (you will verify this in the notebook)</li>
<li>the assignment in the moral hazard section in the notebook: use Rawls' criterion as welfare function for the government</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org21ee854" class="outline-2">
<h2 id="org21ee854">Financial crisis</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Jan Boone</p>
</div>
</body>
</html>
